dsn = "../Data")
countrycodes <- read.csv("../Data/list-eurostat-eea-and-fao-country-codes-side-by-side.csv")
countrycodes <- countrycodes[1:38,c(1,6)]
plot(Europe)
Europe <- sp::merge(Europe, countrycodes, by.x = "CNTR_CODE", by.y = "estatcode.text")
EuropeCorona <- PerCountry %>%
filter(Country.Region %in% countrycodes$name.text) %>%
filter(name == Sys.Date() -1)
Europe <- sp::merge(Europe, EuropeCorona, by.x = "name.text", by.y = "Country.Region")
qtm(Europe, fill = "Confirmed",
fill.palette = "viridis",
fill.breaks = c(0,1, 10,100,1000,10000,20000, Inf))
m1 <- qtm(Europe, fill = "Confirmed",
fill.palette = "viridis",
fill.breaks = c(0,1, 10,100,1000,10000,20000, Inf))
tmap_leaflet(m1)
View(countrycodes)
Europe <- readOGR(layer = "NUTS_RG_03M_2016_3035_LEVL_0",
dsn = "../Data")
plot(Europe)
View(Europe)
View(Europe@data)
countrycodes <- read.csv("../Data/list-eurostat-eea-and-fao-country-codes-side-by-side.csv")
countrycodes <- countrycodes[1:38,c(1,6)]
Europe <- sp::merge(Europe, countrycodes, by.x = "CNTR_CODE", by.y = "estatcode.text")
EuropeCorona <- PerCountry %>%
filter(Country.Region %in% countrycodes$name.text) %>%
filter(name == Sys.Date() -1)
Europe <- sp::merge(Europe, EuropeCorona, by.x = "name.text", by.y = "Country.Region")
m1 <- qtm(Europe, fill = "Confirmed",
fill.palette = "viridis",
fill.breaks = c(0,1, 10,100,1000,10000,20000, Inf))
tmap_leaflet(m1)
tmap_leaflet(m1)
Confirmed <- read.csv("https://raw.githubusercontent.com/CSSEGISandData/COVID-19/master/csse_covid_19_data/csse_covid_19_time_series/time_series_19-covid-Confirmed.csv")
Deaths <- read.csv("https://raw.githubusercontent.com/CSSEGISandData/COVID-19/master/csse_covid_19_data/csse_covid_19_time_series/time_series_19-covid-Deaths.csv")
Recovered <- read.csv("https://raw.githubusercontent.com/CSSEGISandData/COVID-19/master/csse_covid_19_data/csse_covid_19_time_series/time_series_19-covid-Recovered.csv")
# Making a list
Corona <- list(Confirmed, Deaths, Recovered)
# How many columns?
a <- ncol(Confirmed)
#Let's convert each of the dataframes to a 'long format'
Corona <- lapply(Corona, pivot_longer, 5:a)
#Change the date strings to real dates
Corona <- lapply(Corona, mutate, name = str_replace(name, "X", ""))
Corona<- lapply(Corona, mutate, name = mdy(name))
Alltogether <- merge(Corona[[1]], Corona[[2]],
by = c('Province.State',
'Country.Region',
'Long',
'Lat',
'name'))
Alltogether <- merge(Alltogether, Corona[[3]],
by = c('Province.State',
'Country.Region',
'Long',
'Lat',
'name'))
#Renaming the variables
names(Alltogether)[6:8] <- c("Confirmed", "Deaths", "Recovered")
Keystats <- Alltogether %>%
filter(name == max(name)) %>%
summarise(Confirmed = sum(Confirmed), Deaths = sum(Deaths), Recovered = sum(Recovered))
write.csv(Keystats, "Keystats.csv")
length(unique(Alltogether$Country.Region)) %>%
write.table("countries.txt", row.names = F, col.names = F)
kable(Keystats, caption = "Key statistics",
booktabs = TRUE,
row.names = FALSE,
format = "markdown",
position = "center")
PerCountry <- Alltogether %>%
group_by(Country.Region, name) %>%
summarise(Confirmed = sum(Confirmed),
Deaths = sum(Deaths),
Recovered = sum(Recovered))
PerCountry <- PerCountry %>%
ungroup(Country.Region) %>%
mutate(Country.Region = as.character(Country.Region))
#Correct a few country names
PerCountry$Country.Region[PerCountry$Country.Region == "US"] <- "United States"
PerCountry$Country.Region[PerCountry$Country.Region == "Czechia"] <- "Czech Republic"
firstday <- PerCountry %>%
group_by(Country.Region) %>%
filter(Confirmed > 0) %>%
mutate(firstday = min(name)) %>%
select(Country.Region, firstday) %>%
distinct()
PerCountry <- merge(PerCountry, firstday)
PerCountry <- PerCountry %>%
mutate(sincefirstday = name - firstday)
day100 <- PerCountry %>%
group_by(Country.Region) %>%
filter(Confirmed > 99) %>%
mutate(daymore100 = min(name)) %>%
select(Country.Region, daymore100) %>%
distinct()
PerCountry <- left_join(PerCountry, day100)
PerCountry <- PerCountry %>%
mutate(sincehunday = name - daymore100)
Europe <- readOGR(layer = "NUTS_RG_03M_2016_3035_LEVL_0",
dsn = "../Data")
countrycodes <- read.csv("../Data/list-eurostat-eea-and-fao-country-codes-side-by-side.csv")
countrycodes <- countrycodes[1:38,c(1,6)]
Europe <- sp::merge(Europe, countrycodes, by.x = "CNTR_CODE", by.y = "estatcode.text")
EuropeCorona <- PerCountry %>%
filter(Country.Region %in% countrycodes$name.text) %>%
filter(name == Sys.Date() -1)
Europe <- sp::merge(Europe, EuropeCorona, by.x = "name.text", by.y = "Country.Region")
m1 <- qtm(Europe, fill = "Confirmed",
fill.palette = "viridis",
fill.breaks = c(0,1, 10,100,1000,10000,20000, Inf))
m1
View(Europe)
View(Europe@data)
Confirmed <- read.csv("https://raw.githubusercontent.com/CSSEGISandData/COVID-19/master/csse_covid_19_data/csse_covid_19_time_series/time_series_19-covid-Confirmed.csv")
Deaths <- read.csv("https://raw.githubusercontent.com/CSSEGISandData/COVID-19/master/csse_covid_19_data/csse_covid_19_time_series/time_series_19-covid-Deaths.csv")
Recovered <- read.csv("https://raw.githubusercontent.com/CSSEGISandData/COVID-19/master/csse_covid_19_data/csse_covid_19_time_series/time_series_19-covid-Recovered.csv")
# Making a list
Corona <- list(Confirmed, Deaths, Recovered)
# How many columns?
a <- ncol(Confirmed)
#Let's convert each of the dataframes to a 'long format'
Corona <- lapply(Corona, pivot_longer, 5:a)
#Change the date strings to real dates
Corona <- lapply(Corona, mutate, name = str_replace(name, "X", ""))
Corona<- lapply(Corona, mutate, name = mdy(name))
Alltogether <- merge(Corona[[1]], Corona[[2]],
by = c('Province.State',
'Country.Region',
'Long',
'Lat',
'name'))
Alltogether <- merge(Alltogether, Corona[[3]],
by = c('Province.State',
'Country.Region',
'Long',
'Lat',
'name'))
#Renaming the variables
names(Alltogether)[6:8] <- c("Confirmed", "Deaths", "Recovered")
View(Alltogether)
Keystats <- Alltogether %>%
filter(name == max(name)) %>%
summarise(Confirmed = sum(Confirmed), Deaths = sum(Deaths), Recovered = sum(Recovered))
write.csv(Keystats, "Keystats.csv")
length(unique(Alltogether$Country.Region)) %>%
write.table("countries.txt", row.names = F, col.names = F)
kable(Keystats, caption = "Key statistics",
booktabs = TRUE,
row.names = FALSE,
format = "markdown",
position = "center")
PerCountry <- Alltogether %>%
group_by(Country.Region, name) %>%
summarise(Confirmed = sum(Confirmed),
Deaths = sum(Deaths),
Recovered = sum(Recovered))
View(PerCountry)
PerCountry <- PerCountry %>%
ungroup(Country.Region) %>%
mutate(Country.Region = as.character(Country.Region))
View(PerCountry)
#Correct a few country names
PerCountry$Country.Region[PerCountry$Country.Region == "US"] <- "United States"
View(PerCountry)
PerCountry$Country.Region[PerCountry$Country.Region == "Czechia"] <- "Czech Republic"
View(PerCountry)
firstday <- PerCountry %>%
group_by(Country.Region) %>%
filter(Confirmed > 0) %>%
mutate(firstday = min(name)) %>%
select(Country.Region, firstday) %>%
distinct()
PerCountry <- merge(PerCountry, firstday)
View(PerCountry)
PerCountry <- PerCountry %>%
mutate(sincefirstday = name - firstday)
View(PerCountry)
day100 <- PerCountry %>%
group_by(Country.Region) %>%
filter(Confirmed > 99) %>%
mutate(daymore100 = min(name)) %>%
select(Country.Region, daymore100) %>%
distinct()
PerCountry <- left_join(PerCountry, day100)
View(PerCountry)
PerCountry <- PerCountry %>%
mutate(sincehunday = name - daymore100)
View(PerCountry)
Europe <- readOGR(layer = "NUTS_RG_03M_2016_3035_LEVL_0",
dsn = "../Data")
countrycodes <- countrycodes[1:38,c(1,6)]
countrycodes <- read.csv("../Data/list-eurostat-eea-and-fao-country-codes-side-by-side.csv")
countrycodes <- countrycodes[1:38,c(1,6)]
View(countrycodes)
View(countrycodes)
Europe <- sp::merge(Europe, countrycodes, by.x = "CNTR_CODE", by.y = "estatcode.text")
View(Europe@data)
EuropeCorona <- PerCountry %>%
filter(Country.Region %in% countrycodes$name.text) %>%
filter(name == Sys.Date() -1)
View(EuropeCorona)
EuropeCorona <- PerCountry %>%
filter(Country.Region %in% countrycodes$name.text) %>%
filter(name == Sys.Date() -2)
Europe <- sp::merge(Europe, EuropeCorona, by.x = "name.text", by.y = "Country.Region")
m1 <- qtm(Europe, fill = "Confirmed",
fill.palette = "viridis",
fill.breaks = c(0,1, 10,100,1000,10000,20000, Inf))
tmap_leaflet(m1)
m1 <- qtm(Europe, fill = "Confirmed",
fill.palette = "viridis",
fill.breaks = c(0,1, 10,100,1000,2000,10000,20000, Inf))
m1 <- qtm(Europe, fill = "Confirmed",
fill.palette = "viridis",
fill.breaks = c(0,1, 10,100,1000,2000,5000, 10000, Inf))
tmap_leaflet(m1)
?tmap_leaflet
library(readxl)
library(rvest)
library(tidyverse)
library(fuzzyjoin)
library(magrittr)
library(leaflet)
library(lubridate)
library(glogis)
library(gridExtra)
library(kableExtra)
x <- c("ggmap", "rgdal", "rgeos", "maptools", "tmap")
lapply(x, library, character.only = TRUE)
Keystats <- read.csv("Keystats.csv")
Countries <- as.numeric(read.table("test.txt"))
Confirmed <- read.csv("https://raw.githubusercontent.com/CSSEGISandData/COVID-19/master/csse_covid_19_data/csse_covid_19_time_series/time_series_19-covid-Confirmed.csv")
Deaths <- read.csv("https://raw.githubusercontent.com/CSSEGISandData/COVID-19/master/csse_covid_19_data/csse_covid_19_time_series/time_series_19-covid-Deaths.csv")
Recovered <- read.csv("https://raw.githubusercontent.com/CSSEGISandData/COVID-19/master/csse_covid_19_data/csse_covid_19_time_series/time_series_19-covid-Recovered.csv")
# Making a list
Corona <- list(Confirmed, Deaths, Recovered)
# How many columns?
a <- ncol(Confirmed)
#Let's convert each of the dataframes to a 'long format'
Corona <- lapply(Corona, pivot_longer, 5:a)
#Change the date strings to real dates
Corona <- lapply(Corona, mutate, name = str_replace(name, "X", ""))
Corona<- lapply(Corona, mutate, name = mdy(name))
Alltogether <- merge(Corona[[1]], Corona[[2]],
by = c('Province.State',
'Country.Region',
'Long',
'Lat',
'name'))
Alltogether <- merge(Alltogether, Corona[[3]],
by = c('Province.State',
'Country.Region',
'Long',
'Lat',
'name'))
#Renaming the variables
names(Alltogether)[6:8] <- c("Confirmed", "Deaths", "Recovered")
Keystats <- Alltogether %>%
filter(name == max(name)) %>%
summarise(Confirmed = sum(Confirmed), Deaths = sum(Deaths), Recovered = sum(Recovered))
write.csv(Keystats, "Keystats.csv")
length(unique(Alltogether$Country.Region)) %>%
write.table("countries.txt", row.names = F, col.names = F)
kable(Keystats, caption = "Key statistics",
booktabs = TRUE,
row.names = FALSE,
format = "markdown",
position = "center")
PerCountry <- Alltogether %>%
group_by(Country.Region, name) %>%
summarise(Confirmed = sum(Confirmed),
Deaths = sum(Deaths),
Recovered = sum(Recovered))
PerCountry <- PerCountry %>%
ungroup(Country.Region) %>%
mutate(Country.Region = as.character(Country.Region))
#Correct a few country names
PerCountry$Country.Region[PerCountry$Country.Region == "US"] <- "United States"
PerCountry$Country.Region[PerCountry$Country.Region == "Czechia"] <- "Czech Republic"
firstday <- PerCountry %>%
group_by(Country.Region) %>%
filter(Confirmed > 0) %>%
mutate(firstday = min(name)) %>%
select(Country.Region, firstday) %>%
distinct()
PerCountry <- merge(PerCountry, firstday)
PerCountry <- PerCountry %>%
mutate(sincefirstday = name - firstday)
day100 <- PerCountry %>%
group_by(Country.Region) %>%
filter(Confirmed > 99) %>%
mutate(daymore100 = min(name)) %>%
select(Country.Region, daymore100) %>%
distinct()
PerCountry <- left_join(PerCountry, day100)
PerCountry <- PerCountry %>%
mutate(sincehunday = name - daymore100)
Europe <- readOGR(layer = "NUTS_RG_03M_2016_3035_LEVL_0",
dsn = "../Data")
countrycodes <- read.csv("../Data/list-eurostat-eea-and-fao-country-codes-side-by-side.csv")
countrycodes <- countrycodes[1:38,c(1,6)]
Europe <- sp::merge(Europe, countrycodes,
by.x = "CNTR_CODE",
by.y = "estatcode.text")
EuropeCorona <- PerCountry %>%
filter(Country.Region %in% countrycodes$name.text) %>%
filter(name == Sys.Date() -1)
Europe <- sp::merge(Europe, EuropeCorona,
by.x = "name.text",
by.y = "Country.Region")
m1 <- qtm(Europe,
fill = "Confirmed",
fill.palette = "viridis",
fill.breaks = c(0,1, 10,100,1000,2000,5000, 10000, Inf))
tmap_leaflet(m1)
library(readxl)
library(rvest)
library(tidyverse)
library(fuzzyjoin)
library(magrittr)
library(leaflet)
library(lubridate)
library(glogis)
library(gridExtra)
library(kableExtra)
x <- c("ggmap", "rgdal", "rgeos", "maptools", "tmap")
lapply(x, library, character.only = TRUE)
#Ici, il faut choisir la data à laquelle on va construire la carte.
datum <- as.Date("2020-03-17")
#Importer les données françaises via cet URL:
France <- read.csv("https://www.data.gouv.fr/fr/datasets/r/fa9b8fc8-35d5-4e24-90eb-9abe586b0fa5",header = TRUE, check.names = F)
France <- France %>%
pivot_longer(2:ncol(France),
names_to = "departement",
values_to = "montant") %>%
mutate(Date = ymd(Date))
write.csv(France, "../Data/France.csv")
Belgium <- read_html("https://en.wikipedia.org/wiki/2020_coronavirus_pandemic_in_Belgium") %>%
html_nodes(".wikitable") %>%
html_table(fill = TRUE) %>%
data.frame() %>%
select(1,3,5,7)
a <- as.numeric(nrow(Belgium))
Belgium <- Belgium[-c(1,(a),(a-1)),] %>%
mutate(Date = ymd(Date))
colnames(Belgium) <- c("Date", "BE2", "BE1", "BE3")
Belgium <- Belgium %>%
pivot_longer(2:4, names_to = "NUTS_CODE", values_to = "montant")
write.csv(Belgium, "../Data/Belgique.csv")
Netherlands <- read_html("https://www.rivm.nl/coronavirus-kaart-van-nederland") %>%
html_nodes("#csvData") %>%
html_text() %>%
read_lines() %>%
str_split(";") %>%
unlist()
Netherlands <- Netherlands[-1] %>%
matrix(ncol = 5, byrow = TRUE)
Netherlands <- Netherlands[-(1:2),] %>%
as.data.frame()
date <- read_html("https://www.rivm.nl/coronavirus-kaart-van-nederland") %>%
html_nodes('.with-background > p:nth-child(2)') %>%
html_text() %>%
str_extract("[0-9]{2}\\s[a-z]{1,}\\s[0-9]{4}")
colnames(Netherlands) <- c("numero", "municipalite", "montant", "habitants", "montantparhabitant")
View(Netherlands)
Netherlands <- data.frame(Netherlands, Date = date) %>%
filter(municipalite != "")
write.csv(Netherlands, file = paste("../Data/","netherlands_",date,".csv", sep = ""))
files <- list.files("../Data")
files <- files[grepl("netherlands(.+)", files)]
key <- NULL
Netherlands <- NULL
for (i in files) {
key <- read.csv(paste("../Data/",files, sep = "")) %>%
select(-1)
Netherlands <- rbind(Netherlands, key)
}
View(Netherlands)
Before <- read_excel("../Data/corona_04032020tm16032020.xlsx", sheet = 2)
Before <- Before[!is.na(Before$Gemnr),] %>%
pivot_longer(3:ncol(Before), names_to = "Date", values_to = "montant") %>%
mutate(Date = dmy(str_replace(Date, "Aantal", "")))
colnames(Before) <- c("numero", "municipalite", "Date", "montant")
#Municipalites par province
municipalites <- read_html("https://www.metatopos.eu/Gemtab.php") %>%
html_nodes("section.dikkerand:nth-child(3) > article:nth-child(1) > table:nth-child(2)") %>%
html_table(fill = TRUE, header = TRUE) %>%
data.frame()
#municipalites par nl1 nl2 nl3 nl4
NL1 <- read_html("https://www.regioatlas.nl/indelingen/indelingen_indeling/t/nuts_1_regio_s_landsdelen") %>%
html_nodes("#noord_nederland > div:nth-child(3) > ul:nth-child(2)") %>%
html_text(trim = TRUE) %>%
read_lines() %>%
str_replace_all("\t[\\s]{0,}","")
NL2 <- read_html("https://www.regioatlas.nl/indelingen/indelingen_indeling/t/nuts_1_regio_s_landsdelen") %>%
html_nodes("#oost_nederland > div:nth-child(3) > ul:nth-child(2)") %>%
html_text(trim = TRUE) %>%
read_lines() %>%
str_replace_all("\t[\\s]{0,}","")
NL3 <- read_html("https://www.regioatlas.nl/indelingen/indelingen_indeling/t/nuts_1_regio_s_landsdelen") %>%
html_nodes("#west_nederland > div:nth-child(3) > ul:nth-child(2)") %>%
html_text(trim = TRUE) %>%
read_lines() %>%
str_replace_all("\t[\\s]{0,}","")
NL4 <- read_html("https://www.regioatlas.nl/indelingen/indelingen_indeling/t/nuts_1_regio_s_landsdelen") %>%
html_nodes("#zuid_nederland > div:nth-child(3) > ul:nth-child(2)") %>%
html_text(trim = TRUE) %>%
read_lines() %>%
str_replace_all("\t[\\s]{0,}","")
NUTSlvl1 <-
rbind(
data.frame(municipalite = NL1, NUTS = "NL1"),
data.frame(municipalite = NL2, NUTS = "NL2"),
data.frame(municipalite = NL3, NUTS = "NL3"),
data.frame(municipalite = NL4, NUTS = "NL4")
)
Netherlands <- merge(Netherlands, NUTSlvl1)
Netherlands <- Netherlands %>%
group_by(NUTS, Date) %>%
summarise(montant = sum(montant)) %>%
mutate(Date = dmy(Date))
View(Netherlands)
#Importer les données néerlandaises va un peu plus difficilement: on va garder la date dans une colonne séparée:
Netherlands <- read_html("https://www.rivm.nl/coronavirus-kaart-van-nederland") %>%
html_nodes("#csvData") %>%
html_text() %>%
read_lines() %>%
str_split(";") %>%
unlist()
Netherlands <- Netherlands[-1] %>%
matrix(ncol = 5, byrow = TRUE)
Netherlands <- Netherlands[-(1:2),] %>%
as.data.frame()
date <- read_html("https://www.rivm.nl/coronavirus-kaart-van-nederland") %>%
html_nodes('.with-background > p:nth-child(2)') %>%
html_text() %>%
str_extract("[0-9]{2}\\s[a-z]{1,}\\s[0-9]{4}")
colnames(Netherlands) <- c("numero", "municipalite", "montant", "habitants", "montantparhabitant")
Netherlands <- data.frame(Netherlands, Date = date) %>%
filter(municipalite != "")
write.csv(Netherlands, file = paste("../Data/","netherlands_",date,".csv", sep = ""))
View(Netherlands)
files <- list.files("../Data")
files <- files[grepl("netherlands(.+)", files)]
key <- NULL
Netherlands <- NULL
for (i in files) {
key <- read.csv(paste("../Data/",files, sep = "")) %>%
select(-1)
Netherlands <- rbind(Netherlands, key)
}
Before <- read_excel("../Data/corona_04032020tm16032020.xlsx", sheet = 2)
Before <- Before[!is.na(Before$Gemnr),] %>%
pivot_longer(3:ncol(Before), names_to = "Date", values_to = "montant") %>%
mutate(Date = dmy(str_replace(Date, "Aantal", "")))
colnames(Before) <- c("numero", "municipalite", "Date", "montant")
View(Before)
#Municipalites par province
municipalites <- read_html("https://www.metatopos.eu/Gemtab.php") %>%
html_nodes("section.dikkerand:nth-child(3) > article:nth-child(1) > table:nth-child(2)") %>%
html_table(fill = TRUE, header = TRUE) %>%
data.frame()
NL1 <- read_html("https://www.regioatlas.nl/indelingen/indelingen_indeling/t/nuts_1_regio_s_landsdelen") %>%
html_nodes("#noord_nederland > div:nth-child(3) > ul:nth-child(2)") %>%
html_text(trim = TRUE) %>%
read_lines() %>%
str_replace_all("\t[\\s]{0,}","")
NL2 <- read_html("https://www.regioatlas.nl/indelingen/indelingen_indeling/t/nuts_1_regio_s_landsdelen") %>%
html_nodes("#oost_nederland > div:nth-child(3) > ul:nth-child(2)") %>%
html_text(trim = TRUE) %>%
read_lines() %>%
str_replace_all("\t[\\s]{0,}","")
NL3 <- read_html("https://www.regioatlas.nl/indelingen/indelingen_indeling/t/nuts_1_regio_s_landsdelen") %>%
html_nodes("#west_nederland > div:nth-child(3) > ul:nth-child(2)") %>%
html_text(trim = TRUE) %>%
read_lines() %>%
str_replace_all("\t[\\s]{0,}","")
NL3 <- read_html("https://www.regioatlas.nl/indelingen/indelingen_indeling/t/nuts_1_regio_s_landsdelen") %>%
html_nodes("#west_nederland > div:nth-child(3) > ul:nth-child(2)") %>%
html_text(trim = TRUE) %>%
read_lines() %>%
str_replace_all("\t[\\s]{0,}","")
NL4 <- read_html("https://www.regioatlas.nl/indelingen/indelingen_indeling/t/nuts_1_regio_s_landsdelen") %>%
html_nodes("#zuid_nederland > div:nth-child(3) > ul:nth-child(2)") %>%
html_text(trim = TRUE) %>%
read_lines() %>%
str_replace_all("\t[\\s]{0,}","")
NUTSlvl1 <-
rbind(
data.frame(municipalite = NL1, NUTS = "NL1"),
data.frame(municipalite = NL2, NUTS = "NL2"),
data.frame(municipalite = NL3, NUTS = "NL3"),
data.frame(municipalite = NL4, NUTS = "NL4")
)
View(NUTSlvl1)
#Netherlands <-
merge(Netherlands, NUTSlvl1)
Netherlands <- merge(Netherlands, NUTSlvl1)
Netherlands <- Netherlands %>%
group_by(NUTS, Date) %>%
summarise(montant = sum(montant)) %>%
mutate(Date = dmy(Date))
Before <- Before %>%
merge(NUTSlvl1) %>%
mutate(montant = as.numeric(montant)) %>%
group_by(NUTS, Date) %>%
summarise(montant = sum(montant))
View(Before)
Netherlands <- rbind(Netherlands, Before)
View(Netherlands)
